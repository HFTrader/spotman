# Hibernation-Enabled Spot Instance Profile
## Key Benefits:
# ğŸš€ Cost-effective spot pricing
# ğŸ”„ Hibernation state preservation  
# âš¡ Fast resume from hibernation (when available)
# ğŸ’¾ Memory contents preserved
# ğŸ›¡ï¸ Automatic encryption
#
# Important Hibernation + Spot Limitations:
# âš ï¸  Manual Resume Challenges: Hibernated spot instances may not be manually resumable
# âš ï¸  AWS Auto-Resume: AWS may automatically restart when spot capacity becomes available
# âš ï¸  Spot Request State: Hibernation can disable the associated spot request
# âš ï¸  Alternative: For guaranteed hibernation resume, use hibernation-ondemand profile
#
# Best Use Cases:
# âœ… Long-running batch jobs that can tolerate restart delays
# âœ… Development environments where cost is more important than instant resume
# âœ… Workloads that can wait for AWS automatic restart
#
# For Guaranteed Resume: Use hibernation-ondemand profile for production workloads
#
# Usage:
#   ./spotman --region sa-east-1 create --profile spot-hibernation --name hibernate-spot01now supports hibernation on spot instances using InstanceMarketOptions
# This uses the modern run_instances API with spot configuration

# Instance configuration
instance_type: "m5.large"  # Hibernation-compatible instance family
spot_instance: true  # Now supports hibernation with InstanceMarketOptions!
hibernation_enabled: true  # Enable hibernation capability

# Storage configuration
root_volume_size: 20  # GB - adequate for hibernation image
root_volume_type: "gp3"  # Fast storage for hibernation performance

# Operating system configuration
os_type: "ubuntu"
update_os: true  # Keep system current

# Enhanced user data script for hibernation setup
user_data: !include ../scripts/hibernation-setup.sh

# Tags for hibernation-capable spot instances
tags:
  ApplicationClass: "hibernation"
  Environment: "development"
  InstanceType: "spot"
  HibernationEnabled: "true"
  Purpose: "hibernation-testing"
  ManagedBy: "spotman"
  
# Enhanced Features:
# âœ… Spot instances with hibernation support (NEW!)
# âœ… Uses modern InstanceMarketOptions API approach
# âœ… All hibernation features available on spot instances
# âœ… Significant cost savings with hibernation capability
# âœ… Encrypted root volume (automatic with hibernation)
# âœ… Comprehensive hibernation setup and management scripts
#
# Hibernation Requirements Met:
# âœ“ Spot instance with hibernation support (NOW AVAILABLE!)
# âœ“ Hibernation-compatible instance family (M5)
# âœ“ Encrypted root volume (automatic)
# âœ“ Adequate swap space (RAM + buffer)
# âœ“ Hibernation packages installed
# âœ“ Management scripts included
#
# Key Benefits:
# ï¿½ Cost-effective spot pricing
# ğŸ”„ Hibernation state preservation
# âš¡ Fast resume from hibernation
# ï¿½ Memory contents preserved
# ğŸ›¡ï¸ Automatic encryption
#
# Usage:
#   ./spotman --region sa-east-1 create --profile spot-hibernation --name hibernate-spot01
